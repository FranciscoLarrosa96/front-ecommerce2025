<!-- DRAWER LATERAL -->
<div *ngIf="isDrawerOpen" class="fixed inset-0 bg-black bg-opacity-50 z-40" (click)="isDrawerOpen = false"></div>

<aside *ngIf="isDrawerOpen"
  class="fixed top-0 left-0 w-64 h-full bg-white dark:bg-gray-900 shadow-md z-50 p-4 transition-transform duration-100"
  data-aos="fade-right">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-bold text-main">Menú</h2>
    <button (click)="isDrawerOpen = false" class="text-xl text-text dark:text-white">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <nav class="flex flex-col gap-4 text-text dark:text-white text-sm mt-4">
    <a href="#" class="flex items-center gap-3 hover:text-main">
      <i class="fas fa-bolt w-5"></i> Ofertas
    </a>
    <a href="#" class="flex items-center gap-3 hover:text-main">
      <i class="fas fa-desktop w-5"></i> Computadoras
    </a>
    <a href="#" class="flex items-center gap-3 hover:text-main">
      <i class="fas fa-memory w-5"></i> Placas de video
    </a>
    <a href="#" class="flex items-center gap-3 hover:text-main">
      <i class="fas fa-microchip w-5"></i> Microprocesadores
    </a>
  </nav>

</aside>


<main class="flex flex-col md:flex-row px-4 md:px-8 py-6 gap-6 bg-background text-text">
  <!-- FILTROS (Sidebar izquierda) -->
  <aside data-aos="fade-right" class="w-full md:w-64 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-md">
    <h2 class="text-lg font-bold text-main mb-4">Filtrar por</h2>

    <div class="mb-4">
      <h3 class="font-semibold mb-2">Categoría</h3>
      <div class="flex flex-col gap-1 text-sm">
        <label><input type="checkbox" class="mr-2"> Placas de Video</label>
        <label><input type="checkbox" class="mr-2"> Microprocesadores</label>
      </div>
    </div>

    <div class="mb-4">
      <h3 class="font-semibold mb-2">Marca</h3>
      <div class="flex flex-col gap-1 text-sm">
        <label><input type="checkbox" class="mr-2"> Gigabyte</label>
        <label><input type="checkbox" class="mr-2"> MSI</label>
        <label><input type="checkbox" class="mr-2"> Asus</label>
      </div>
    </div>

    <div class="mb-4">
      <h3 class="font-semibold mb-2">Promociones</h3>
      <div class="flex flex-col gap-1 text-sm">
        <label><input type="checkbox" class="mr-2"> Winter Sale</label>
        <label><input type="checkbox" class="mr-2"> Hasta 18 cuotas</label>
      </div>
    </div>
  </aside>

  <!-- GRID DE PRODUCTOS -->
  <section class="flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
    <div *ngFor="let producto of productos"
      class="card bg-white dark:bg-gray-900 rounded-lg shadow-lg p-4 flex flex-col" data-aos="fade-up">
      <div class="bg-white dark:bg-gray-900 rounded-lg shadow-lg p-4 flex flex-col relative"
        [ngClass]="{ 'opacity-50 pointer-events-none': !producto.stock }" data-aos="fade-up">
        <!-- Badge Stock -->
        <span *ngIf="producto.stock; else sinStock"
          class="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded">
          En stock
        </span>

        <!-- Badge Sin stock -->
        <ng-template #sinStock>
          <span class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-0.5 rounded">
            Sin stock
          </span>
        </ng-template>

        <!-- Imagen -->
        <img [src]="producto.thumb" [alt]="producto.nombre" class="w-full h-40 object-contain mb-3" />

        <!-- Nombre -->
        <h3 class="font-bold text-base mb-2 min-h-[48px]">
          {{ producto.nombre }}
        </h3>

        <!-- Precio -->
        <div class="min-h-[48px] flex flex-col justify-end">
          <p *ngIf="producto.precioOriginal" class="text-sm text-gray-500 line-through">
            {{ producto.precioOriginal | currency:'ARS' }}
          </p>
          <p class="text-lg font-bold text-main">{{ producto.precio | currency:'ARS' }}</p>
        </div>

        <!-- Contenedor de acción -->
        <div class="flex items-center justify-between mt-auto pt-4">
          <!-- Botón Ver más -->
          <button class="bg-main hover:bg-hover text-white rounded-md px-4 py-2 text-sm" (click)="verProducto(producto)"
            [ngClass]="{ 'opacity-50 pointer-events-none': !producto.stock }">
            Ver más
          </button>

          <!-- Ícono carrito -->
          <button class="text-main hover:text-hover transition-colors" title="Agregar al carrito"
            (click)="agregarAlCarrito(producto)" [ngClass]="{ 'opacity-50 pointer-events-none': !producto.stock }">
            <i class="fas fa-cart-plus text-lg"></i>
          </button>
        </div>



      </div>


    </div>
  </section>
</main>